<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knew you would say yes!</title>
    <link rel="stylesheet" href="./yes_style.css">
</head>

<body>

    <div class="container">
        <h1 class="header_text" id="yesText"></h1>

        <div class="gif_container">
            <img id="bearGif"
            src="https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif">
        </div>
    </div>

    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>

    // ðŸ’– READ NAME FROM LINK
const params = new URLSearchParams(window.location.search);
const visitorName = params.get("name");

// ðŸ’– TYPEWRITER TEXT (WITH NAME SUPPORT)
const baseText = "Knew you would say yes";
let i = 0;

function typeWriter() {

    let finalText = baseText;

    if (visitorName) {
        finalText += ", " + visitorName;
    }

    finalText += "! ðŸ’–";

    if (i < finalText.length) {
        document.getElementById("yesText").innerHTML += finalText.charAt(i);
        i++;
        setTimeout(typeWriter, 60);
    }
}

// ðŸ’– LOG YES CLICK
if (visitorName) {
    console.log(visitorName + " clicked YES ðŸ’–");
}


    // ðŸ’– HEARTS EXPLOSION
    function heartsExplosion() {
        for (let i = 0; i < 30; i++) {
            const heart = document.createElement("div");
            heart.innerHTML = "ðŸ’–";
            heart.style.position = "fixed";
            heart.style.left = "50%";
            heart.style.top = "50%";
            heart.style.fontSize = (Math.random() * 20 + 20) + "px";
            heart.style.pointerEvents = "none";
            heart.style.transform = "translate(-50%, -50%)";
            heart.style.transition = "all 1s ease-out";

            document.body.appendChild(heart);

            const angle = Math.random() * 2 * Math.PI;
            const distance = Math.random() * 250 + 100;

            setTimeout(() => {
                heart.style.left =
                 `calc(50% + ${Math.cos(angle) * distance}px)`;
                heart.style.top =
                 `calc(50% + ${Math.sin(angle) * distance}px)`;
                heart.style.opacity = "0";
            }, 10);

            setTimeout(() => heart.remove(), 1200);
        }
    }

    // ðŸŽ‰ CONFETTI RAIN
    setInterval(() => {
        confetti({
            particleCount: 3,
            spread: 60,
            origin: { x: Math.random(), y: 0 }
        });
    }, 300);

    // âœ¨ CLICK SPARKLE BURST
    document.addEventListener("click", (e) => {
        for (let i=0;i<8;i++){
            const sp = document.createElement("div");
            sp.innerHTML = "âœ¨";
            sp.style.position = "fixed";
            sp.style.left = e.clientX + "px";
            sp.style.top = e.clientY + "px";
            sp.style.transition = "all 0.8s ease-out";
            sp.style.pointerEvents = "none";

            document.body.appendChild(sp);

            setTimeout(()=>{
                sp.style.transform =
                 `translate(${(Math.random()-0.5)*120}px,
                            ${(Math.random()-0.5)*120}px)`;
                sp.style.opacity = 0;
            },10);

            setTimeout(()=>sp.remove(),800);
        }
    });

    // ðŸš€ PAGE LOAD EVENTS
    window.addEventListener("load", () => {
        heartsExplosion();
        typeWriter();
        // ðŸ’– SAVE YES CLICK TO GOOGLE SHEET
const SHEET_URL = "https://script.google.com/macros/s/AKfycbwx7PQCeRQiBJKtDpsrH0Y5nJCXs5DQArO4YyhP81gB9hthSRMbWpXmLJh2uOWGxIYSFA/exec";

if (visitorName) {

    fetch(SHEET_URL, {
        method: "POST",
        body: JSON.stringify({
            name: visitorName
        }),
        headers: {
            "Content-Type": "application/json"
        }
    })
    .then(() => console.log("Saved to sheet"))
    .catch(err => console.log("Sheet error", err));
}
    });
    

    </script>
<audio id="bgMusic" loop>
    <source src="music.mp3" type="audio/mpeg">
</audio>


</body>
</html>
